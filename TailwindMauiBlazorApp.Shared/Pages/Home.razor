@page "/"
@using Microsoft.AspNetCore.Authorization
@using TailwindMauiBlazorApp.Shared.Helpers
@using TailwindMauiBlazorApp.Shared.Services
@inject JsInterop JsInterop
@implements IAsyncDisposable
@attribute [Authorize]

<PageTitle>Home</PageTitle>

<!-- Globe -->
@* <div >
    <div id="@globeId"
         style="position: absolute; top: 0; left: 0; width: 100%; height: 100vh; z-index: 0;"></div>
</div> *@

<div id="@globeId" class="globe-container"/>

@* <div id="markerPopup"></div>

<!-- Search input: below the globe, inside the main content area -->
<div class="map-search-container" style="position: absolute;bottom: 100px; z-index: 1080;">

        <input type="text"
               placeholder="Search for your next destination..."
               aria-label="Search"
           style="width: 90%;
           max-width: 600px;
           padding: 0.5rem 1rem;
           margin: 0;
           border-radius: 20px;
           border: 1px solid #ccc;
           background-color: rgba(255, 255, 255, 0.85);
           backdrop-filter: blur(5px);
           box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1)" /> 

</div>*@

@code {
    private string globeId = "globeIntroContainer";

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // await JsInterop.LoadScript("//cdn.jsdelivr.net/npm/globe.gl");
            await JsInterop.CreateIntroGlobe(globeId);
        }
    }

    public async ValueTask DisposeAsync()
    {
        await JsInterop.DestroyIntroGlobe();
    }
}
